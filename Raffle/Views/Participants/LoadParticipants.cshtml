@using Raffle.Models;
@model Raffle.Models.ParticipantsViewModel
@{
    Layout = null;
    ViewBag.Title = "Raffle";
}


    <title>@ViewBag.Title</title>
    <meta charset="UTF-8">
    <script src="~/Scripts/jquery-1.9.1.min.js"></script>
    <script src="~/JSFiles/library.js"></script>
    <script type="text/javascript">
        var users = @Html.Raw(Json.Encode(Model.participants));
        window.onload = function () {
            list = users;
            var t = creatSlotMachine($(".slotMachineContainer")[0], list);

            setTimeout(function () {
                putList(t.list, list)
            }, 50),

         $(".screen .confirm").on("click", function () {
             $(".prize").hide("nomal", function () {
                 $(".screen").css("display", "none")
             })
         }),

            $(t.button).on("click", function () {
             animateButton($(t.button)), t.joysticks.addClass("joysticksAnimate"), setTimeout(function () {
                 t.joysticks.removeClass("joysticksAnimate")
             }, 1850),
                drawARaffle(t, list)
            }).css("cursor", "pointer")
        };
    </script>
    <link href="~/Content/Site.css" rel="stylesheet" />
    <link href="~/Content/bootstrap.min.css" rel="stylesheet" />
    <link href="~/Content/index.css" rel="stylesheet" />
    <link href="~/Content/library.css" rel="stylesheet" />

    <div class="container-fluid header_background">
        <div class="row">
            <div style="height:40%;font-size:60px;font-weight:600;margin-top:auto;" class="text-center">
                <br />
                <span style="font-size:80px;color:white;letter-spacing:50px;">@Model.prizes.prize_name</span>
                <div>@Model.prizes.prize_id</div>
            </div>
        </div>
    </div>

   
<div class="slotMachineContainer"></div>
       
    <div class="screen">
        <div class="prize">
            <div class="name">
                <p>&nbsp;</p>
                <p><span></span></p>
            </div>
            <a href="@Url.Action("UpdateFlag", "Participants", new { prize_id = @Model.prizes.prize_id, prize_name = @Model.prizes.prize_name})" class="btn confirm">
                Raffle Again
            </a>
            @*<button class="btn btn-xs">Show</button>*@
            @*<script>
                function winnername() {
                    var winner = $(".name p span").text();
                    return winner;
                }
            </script>*@

            @*<a href='@Url.Action("UpdateFlag", "Participants", new { prize_id = @Model.prizes.prize_id, prize_name = @Model.prizes.prize_name})' class="btn btn-xs">Prize</a>*@
            
        </div>
    </div>

@*<script>
    $("#btnShow").on("click", function() {
        document.getElementById('winner').value = $(".name p span").text();
    })
</script>*@

@*<script>
    document.getElementById("btnShow").onclick = function() { Winner() };
    function Winner(){
        var winner_name = $(".name p span").text()
        window.load("@Url.Action("UpdateFlag", "Participants", new { prize_id = @Model.prizes.prize_id, prize_name = @Model.prizes.prize_name})?wname=" + winner_name);
    };
</script>*@






